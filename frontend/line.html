<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIVOSY ë¼ì¸ ì†¡ì‹ ê¸°</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #1a1a1e; color: white; }
        textarea { width: 100%; height: 150px; background: #2d2d32; color: white; border: 1px solid #444; border-radius: 10px; padding: 10px; box-sizing: border-box; }
        /* ë¼ì¸ ì „ìš© ìƒ‰ìƒ #06C755 */
        button { width: 100%; padding: 15px; margin-top: 10px; background: #06C755; border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <h2>ğŸ’š LINE -> 14B ê³¼ì¥ë‹˜ ë³´ê³ </h2>
    <textarea id="msg" placeholder="ë¼ì¸ ëŒ€í™” ë‚´ìš©ì„ ì—¬ê¸° ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
    <button onclick="send()">ì „ì†¡í•˜ê¸°</button>

    <script>
        async function send() {
            const btn = document.querySelector('button');
            const msgField = document.getElementById('msg');
            const content = msgField.value;

            if(!content) return alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!");

            btn.disabled = true;
            btn.innerText = "â³ ë¼ì¸ ë°ì´í„° ë¶„ì„ ì¤‘...";
            btn.style.background = "#555";

            try {
                // ì„œë²„ì˜ /api/line ì—”ë“œí¬ì¸íŠ¸ë¡œ ì©ë‹ˆë‹¤. (í´ë¡œë“œê°€ ë§Œë“¤ ì˜ˆì •)
                const res = await fetch('/api/line', { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        sender: 'ê³µì¥ì¥(LINE)', 
                        content: content,
                        channel: 'line' // 'line' ì±„ë„ ì¸ì‹í‘œ ë¶€ì°©!
                    })
                });

                if(res.ok) {
                    alert('âœ… ë¼ì¸ ë³´ê³ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                    msgField.value = ''; 
                }
            } catch(e) {
                alert('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨!');
            } finally {
                btn.disabled = false;
                btn.innerText = "ì „ì†¡í•˜ê¸°";
                btn.style.background = "#06C755";
            }
        }
    </script>
</body>
</html>